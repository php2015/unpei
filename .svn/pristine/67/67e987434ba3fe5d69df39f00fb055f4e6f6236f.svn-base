<?phpclass SiteController extends Controller {    //public $layout = '//layouts/column2';    /**     * Declares class-based actions.     */    public function actions() {        return array(            // captcha action renders the CAPTCHA image displayed on the contact page            'captcha' => array(                'class' => 'CCaptchaAction',                'foreColor' => 0xdd7a36,                'backColor' => 0xfbfbfb, //背景颜色                'minLength' => 4, //最短为4位                'maxLength' => 4, //是长为4位                'width' => 70, //图片宽度                'height' => 30, //图片高度                'offset' => 2, //字符间偏移量。默认是-2                'padding' => 2, //文字周边填充大小。默认为2                'testLimit' => 1, //验证码失效次数,默认是3次            //'transparent'=>true,  //显示为透明            //'fixedVerifyCode'=>'' //固定的验证码,自动测试中想每次返回 相同的验证码值时会用到            ),            // page action renders "static" pages stored under 'protected/views/site/pages'            // They can be accessed via: index.php?r=site/page&view=FileName            'page' => array(                'class' => 'CViewAction',            ),        );    }    public function filters() {        return array(        );    }    /**     * This is the default 'index' action that is invoked     * when an action is not explicitly requested by users.     */    public function actionIndex() {        // renders the view file 'protected/views/site/index.php'        // using the default layout 'protected/views/layouts/main.php'        $this->layout = '//layouts/login';        if (Yii::app()->user->isGuest) {            $model = new UserLogin;            $this->render('application.modules.user.views.user.newlogin', array('model' => $model));            Yii::app()->end();        }        if (Yii::app()->user->isMaker()) {            $this->redirect(array('/maker'));        } else if (Yii::app()->user->isDealer()) {            $this->redirect(array('/dealer'));        } else if (Yii::app()->user->isServicer()) {            $this->redirect(array('/servicer'));        } else {            // 首页不跳转            Yii::app()->user->logout();            $this->redirect(Yii::app()->user->loginUrl);        }    }    /*      public function actionEmail() {      $message = 'Hello World!';      Yii::app()->mailer->Host = 'smtp.gmail.com';      Yii::app()->mailer->IsSMTP();      Yii::app()->mailer->SMTPAuth = true; //設定SMTP需要驗證      Yii::app()->mailer->SMTPSecure = "ssl"; // Gmail的SMTP主機需要使用SSL連線      Yii::app()->mailer->Port = 465;  //Gamil的SMTP主機的SMTP埠位為465埠。      Yii::app()->mailer->CharSet = "big5"; //設定郵件編碼      Yii::app()->mailer->Username = "yhxxlm@gmail.com"; //設定驗證帳號      Yii::app()->mailer->Password = ""; //設定驗證密碼      Yii::app()->mailer->From = 'yhxxlm@gmail.com';      Yii::app()->mailer->FromName = 'yhxxlm';      Yii::app()->mailer->AddReplyTo('yhxxlm@gmail.com');      Yii::app()->mailer->AddAddress('yhxxlm@foxmail.com');      Yii::app()->mailer->Subject = 'Yii rulez!';      Yii::app()->mailer->Body = $message;      Yii::app()->mailer->Send();      }     */    /**     * This is the action to handle external exceptions.     */    public function actionError() {        if ($error = Yii::app()->errorHandler->error) {            //Yii::log($msg,$level,$category);            if (Yii::app()->request->isAjaxRequest)                echo $error['message'];            else {                if ($error && $error['code'] == '404') {                    $this->layout = false;                    $this->render('404', $error);                    Yii::app()->end();                } else {                    $this->render('error', $error);                }            }        }    }    public function actionPromition() {        //活动借宿//        $this->redirect(Yii::app()->user->loginUrl);        $this->pageTitle = Yii::app()->name . '迎新春献礼';        $this->layout = false;        $this->render('promition');    }    /**     * Displays the contact page     */    /*      public function actionContact() {      $model = new ContactForm;      if (isset($_POST['ContactForm'])) {      $model->attributes = $_POST['ContactForm'];      if ($model->validate()) {      $headers = "From: {$model->email}\r\nReply-To: {$model->email}";      mail(Yii::app()->params['adminEmail'], $model->subject, $model->body, $headers);      Yii::app()->user->setFlash('contact', 'Thank you for contacting us. We will respond to you as soon as possible.');      $this->refresh();      }      }      $this->render('contact', array('model' => $model));      }     */    /**     * Displays the login page     */    /*      public function actionLogin() {      $model = new LoginForm;      // if it is ajax validation request      if (isset($_POST['ajax']) && $_POST['ajax'] === 'login-form') {      echo CActiveForm::validate($model);      Yii::app()->end();      }      // collect user input data      if (isset($_POST['LoginForm'])) {      $model->attributes = $_POST['LoginForm'];      // validate user input and redirect to the previous page if valid      if ($model->validate() && $model->login())      $this->redirect(Yii::app()->user->returnUrl);      }      // display the login form      $this->render('login', array('model' => $model));      }      public function actionLogout() {      Yii::app()->user->logout();      $this->redirect(Yii::app()->homeUrl);      }      public function actionCart() {      $this->render('cart');      }     */}